# Copilot Instructions for hijikiTool

hijikiToolはMisskey/Firefish向けの自動投稿スケジューラーです。  
Goで実装されており、Cronなどを使用した外部スケジュール管理を使用しないスタンドアロン動作を特徴とします。

リポジトリ: https://github.com/CAT5NEKO/hijikiTool.git

## コードレビュー方針

本プロジェクトのコードをレビューまたは修正する際は、以下の原則に従ってください。  
既存コードの設計思想を尊重しつつ、Goおよびソフトウェアアーキテクチャのベストプラクティスに照らして改善提案を行いましょう。  
コードレビューは必ず日本語でお願いします。  
ぶび。

## 設計原則

### Clean Architecture

本プロジェクトは以下のレイヤー構造を採用しています。

- domain: ビジネスロジック、値オブジェクト、ドメインサービス
- application/ports: 外部依存のインターフェース定義
- application/usecases: アプリケーションロジック
- infrastructure: 外部依存の実装（API通信、ファイルI/O、時刻取得）
- scheduler: メインループ、スケジュール管理

レイヤー間の依存方向を厳守してください。infrastructureからdomainへの依存は許可されるが、逆は禁止です。

### Dependency Injection

外部依存（ファイルシステム、環境変数、時刻取得、HTTP通信）は全てインターフェースを介して注入しています。これによりテスト時のMock化が可能となります。

## コーディングルール

### コメント禁止

コード内にコメントを記述しない。意味のある命名のみでロジックを説明すること。コメントが必要だと感じた場合は、関数の分割や命名の改善によって解決してください。

### テスト駆動開発

新機能の追加や既存機能の修正を行う場合は、テストコードを先に記述すること。境界条件（月末、年跨ぎ、閏年、再起動直後など）を網羅したテストを書いてください。

### 命名規則

- 関数名、変数名は意図を明確に表現する
- 略語は一般的なもの（ID、URL、HTTPなど）に限定する
- パッケージ名は単数形の小文字とする

## テスト

- Go標準のtestingパッケージを使用
- github.com/stretchr/testifyでアサーションを記述
- 時刻依存のテストはFake Clockパターンを使用

## 設定ファイル

- 認証情報（トークン等）は.envで管理
- スケジュール設定はconfig.jsonで管理
- 投稿記録はpost_records.jsonで永続化

## ベストプラクティスの適用

Goの標準的な慣習（エラーハンドリング、パッケージ構成、命名規則）およびClean Architectureの原則に反する実装を発見した場合は、改善を提案すること。ただし、既存コードの一貫性を著しく損なう変更は避けること。
